<!doctype html>
<html>
<head>
  <meta charset="utf-8">
<title>ubuntu16.04安装gpu版tensorflow＋keras | Michael Zhang</title>
<meta name="author" content="Michael Zhang">


<link rel="shortcut icon" href="/public/img/deer3.png" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/public/css/bootstrap.css">
<link rel="stylesheet" href="/public/css/font-awesome.css">
<link rel="stylesheet" href="/public/js/prettify/prettify.css">
<link rel="stylesheet" href="/public/css/base.css">
<link href="/pages/atom.xml" rel="alternate" title="Michael Zhang" type="application/atom+xml">
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-lg-3 col-sm-13 col-xs-13 aside visible-md visible-lg">
  <div class="row">
    <div class="col-md-2 col-xs-2 aside1">
      <br>
      <a class="pjaxlink" href="/"><img src="/public/img/deer3.png" class="img-ronuded avatar" style="border-width:0px; border-color:#000"></a>
      <br><br><br><br>
      <ul class="nav nav-pills nav-stacked" id="ul_category">
        <!-- collect all categories -->
        
         <li><a href="#Linux" data-toggle="tab">Linux</a></li>
        
         <li><a href="#软件使用" data-toggle="tab">软件使用</a></li>
        
         <li><a href="#环境搭建" data-toggle="tab">环境搭建</a></li>
        
        <li><a data-toggle="tab" href="#tags">标签</a></li>
      </ul>
      <div class="aside1_bottom">
        <ul class="nav nav-pills nav-stacked" id="ul_about">
          <li><a class="pjaxlink" href="/pages/archive.html">存档</a></li>
          <li><a class="pjaxlink" href="/pages/about.html">关于</a></li>
        </ul>
          <table class="table table-condensed">
          <tr>
            <td><a href="mailto:zjj421work@163.com"><i class="fa fa-envelope-o fa-lg" style="color:#fff;"></i></a></td>
            <td><a href="http://github.com/zjj421" target="_blank"><i class="fa fa-github fa-lg" style="color:#fff;"></i></a></td>
          </tr>
        </table>
      </div>
    </div>
    <div class="col-md-10 col-xs-10 aside2" id="div_tab">
      <div class="row">
        <div class="tab-content">
          
            <div class="tab-pane" id="Linux">
              <div class="list-group">
                <!-- collect all articles under this category -->
                
                  <a href="/2017/08/06/Basic_knowledge_of_Linux.html" class="list-group-item-terry pjaxlink">Basic knowledge of Linux</a>
                
                  <a href="/2017/08/05/ubuntu16.04%E8%BF%9E%E6%8E%A5AWS-EC2.html" class="list-group-item-terry pjaxlink">ubuntu16.04连接AWS EC2</a>
                
                  <a href="/2017/08/04/Ubuntu16.04%E5%AE%89%E8%A3%85node.js.html" class="list-group-item-terry pjaxlink">Ubuntu16.04 安装node.js并配置</a>
                
              </div>
            </div>
          
            <div class="tab-pane" id="软件使用">
              <div class="list-group">
                <!-- collect all articles under this category -->
                
                  <a href="/2017/08/05/Atom%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" class="list-group-item-terry pjaxlink">Atom简单使用</a>
                
              </div>
            </div>
          
            <div class="tab-pane" id="环境搭建">
              <div class="list-group">
                <!-- collect all articles under this category -->
                
                  <a href="/2017/08/06/ubuntu16.04%E5%AE%89%E8%A3%85gpu%E7%89%88tensorflow-keras.html" class="list-group-item-terry pjaxlink">ubuntu16.04安装gpu版tensorflow＋keras</a>
                
              </div>
            </div>
          
          <div class="tab-pane" id="tags">
            <div class="panel-group" id="accordion">
              <!-- collect all tags -->
              
                <div class="panel panel-info panel-terry">
                  <div class="panel-heading">
                    <h4 class="panel-title">
                      <a data-toggle="collapse" data-toggle="collapse" data-parent="#accordion" href="#Linux">Linux</a>
                      <span class="badge pull-right">3</span>
                    </h4>
                  </div>
                  <div id="Linux" class="panel-collapse collapse">
                    <!-- collect all articles with this tag -->
                    
                      <a  href='/2017/08/06/Basic_knowledge_of_Linux.html' class="list-group-item-terry  pjaxlink">
                        Basic knowledge of Linux
                      </a>
                    
                      <a  href='/2017/08/05/ubuntu16.04%E8%BF%9E%E6%8E%A5AWS-EC2.html' class="list-group-item-terry  pjaxlink">
                        ubuntu16.04连接AWS EC2
                      </a>
                    
                      <a  href='/2017/08/04/Ubuntu16.04%E5%AE%89%E8%A3%85node.js.html' class="list-group-item-terry  pjaxlink">
                        Ubuntu16.04 安装node.js并配置
                      </a>
                    
                  </div>
                </div>
              
                <div class="panel panel-info panel-terry">
                  <div class="panel-heading">
                    <h4 class="panel-title">
                      <a data-toggle="collapse" data-toggle="collapse" data-parent="#accordion" href="#软件使用">软件使用</a>
                      <span class="badge pull-right">1</span>
                    </h4>
                  </div>
                  <div id="软件使用" class="panel-collapse collapse">
                    <!-- collect all articles with this tag -->
                    
                      <a  href='/2017/08/05/Atom%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html' class="list-group-item-terry  pjaxlink">
                        Atom简单使用
                      </a>
                    
                  </div>
                </div>
              
                <div class="panel panel-info panel-terry">
                  <div class="panel-heading">
                    <h4 class="panel-title">
                      <a data-toggle="collapse" data-toggle="collapse" data-parent="#accordion" href="#环境搭建">环境搭建</a>
                      <span class="badge pull-right">1</span>
                    </h4>
                  </div>
                  <div id="环境搭建" class="panel-collapse collapse">
                    <!-- collect all articles with this tag -->
                    
                      <a  href='/2017/08/06/ubuntu16.04%E5%AE%89%E8%A3%85gpu%E7%89%88tensorflow-keras.html' class="list-group-item-terry  pjaxlink">
                        ubuntu16.04安装gpu版tensorflow＋keras
                      </a>
                    
                  </div>
                </div>
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      <div class="col-md-13 col-lg-13 col-sm-13 col-xs-13 aside3">
        <div id="container">
          <div id="pjax">
            <div class="row">
  <div class="col-md-13 aside3-title">
    <br>
    <h2 id="#identifier">ubuntu16.04安装gpu版tensorflow＋keras</h2>
    <p class="text-right">2017-08-06</p>
  </div>
  <div class="col-md-13 aside3-content">
    <div id="content">
      <h2 id="一-安装cuda">一 安装cuda</h2>

<p>１. <a href="https://developer.nvidia.com/cuda-downloads">下载cuda</a>,我选择的是.deb(local)版本的，下载万之后安装</p>

<div class="highlighter-rouge"><pre class="highlight"><code>1. sudo dpkg -i cuda-repo-ubuntu1604-8-0-local-ga2_8.0.61-1_amd64.deb
2. sudo apt-get update
3. sudo apt-get install cuda
4. vim ~/.bashrc
5. 最后一行写上：export PATH=/usr/local/cuda-8.0/bin${PATH:+:${PATH}}
</code></pre>
</div>

<p>２. 验证 nvcc -V　显示编译器信息，则说明cuda配置成功了</p>

<p>３. cuda性能测试</p>

<div class="highlighter-rouge"><pre class="highlight"><code>1. 安装可写样本：cuda-install-samples-8.0.sh &lt;dir&gt;
2. cd NVIDIA_CUDA-8.0_Samples
3. make
4. cd NVIDIA_CUDA-8.0_Samples/bin/x86_64/linux/release
5. ./deviceQuery
6. 输出如图：结果显示pass则说明cuda安装配置完成。
</code></pre>
</div>

<p><img src="../pics/verifycuda.png" alt="" /></p>

<p>４. 安装cudnn库</p>

<div class="highlighter-rouge"><pre class="highlight"><code>１. 下载cudnn v5.1
2. 解压，然后把解压后的文件夹cuda下的include和lib64文件夹下的文件复制到/usr/local/cuda/下对应的include和lib64文件夹里。
	sudo cp include/cudnn.h /usr/local/cuda/include/
	sudo cp lib64/* /usr/local/cuda/lib64/
３. cd /usr/local/cuda/lib64
4. sudo ln -sf libcudnn.so.5.1.10 libcudnn.so.5
5. sudo ln -sf libcudnn.so.5 libcudnn.so
6. sudo ldconfig -v
</code></pre>
</div>

<h2 id="二运算加速库">二　运算加速库</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo apt install -y libopenblas-dev liblapack-dev libatlas-base-dev
sudo apt-get install libcupti-dev
</code></pre>
</div>

<h2 id="三安装anaconda">三　安装anaconda</h2>
<p>网上教程很多，一笔带过了。</p>

<h2 id="四安装gpu版tensorflow">四　安装gpu版<a href="https://www.tensorflow.org/install/install_linux#InstallingAnaconda">tensorflow</a></h2>

<h3 id="安装">安装：</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>1. conda create -n tensorflow
2. source activate tensorflow
3. pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.2.1-cp35-cp35m-linux_x86_64.whl
</code></pre>
</div>

<h3 id="验证">验证</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>1. 新建文件test.py，内容如下

	import tensorflow as tf
	hello = tf.constant('Hello, TensorFlow!')
	sess = tf.Session()
	print(sess.run(hello))

2. 输出：
	b'Hello, Tensorflow!'
</code></pre>
</div>

<h2 id="五安装keras">五　安装keras</h2>

<h3 id="安装-1">安装：</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>1. pip install keras
</code></pre>
</div>

<h3 id="验证-1">验证：</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>1. 终端输入：
	python -c "import keras"
2. 输出：
	Using TensorFlow backend.
</code></pre>
</div>


    </div>
  </div>
  <div id="content_table" style="position:fixed;right:20px;top:120px;display:none;">
    <div class="panel panel-success">
      <div class="panel-body" id="nav"></div>
    </div>
  </div>
</div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="/public/js/jquery.js"></script>
<script type="text/javascript" src="/public/js/bootstrap.js"></script>
<script src="/public/js/jquery.pjax.js"></script>
<script src="/public/js/prettify/prettify.js"></script>
<script src="/public/js/base.js"></script>
<script>
    $('a[href="#coding"]').tab('show');
</script>


  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-54262064-1', 'zjj421.github.io');
  ga('send', 'pageview');
</script>
</body>
</html>